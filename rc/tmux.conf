# UTF-8
set -g utf8
set-window-option -g utf8 on
# Better colours
set -g default-terminal 'screen-256color'
set -g status-bg '#232323'
set -g status-fg '#aaaaaa'

# Unbind all
# unbind -a

set-option -g mouse-select-pane on
set-option -g mouse-select-window on

# Clipboard management
set-window-option -g mode-keys vi
bind -t vi-copy v begin-selection
bind -t vi-copy y copy-selection
bind -t vi-copy V rectangle-toggle

unbind -t vi-copy Enter
unbind -t vi-copy y
bind -t vi-copy Enter copy-pipe "xclip -i -sel clipboard"
bind -t vi-copy y copy-pipe "xclip -i -sel clipboard"

unbind ]
bind ] run "xclip -o -sel clipboard | tmux load-buffer - ; tmux paste-buffer"
bind p run "xclip -o -sel clipboard | tmux load-buffer - ; tmux paste-buffer"

# Use Ctrl+A (be careful, screen users)
set -g prefix C-a

set-option -gw xterm-keys on

bind C-a send-prefix

# Ctrl+PageUp/Dn to switch windows
# (it's possible in some terminal emulators
# to map Ctrl+Tab/Ctrl+Shift+Tab to these
# combinations)
bind -n C-PageUp   previous-window
bind -n C-PageDown next-window

# Pretty much all of these bindings clash horribly
# with the terminator bindings
bind -n C-O split-window -v -c "#{pane_current_path}"
bind -n C-E split-window -h -c "#{pane_current_path}"

bind -n M-Left  select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up    select-pane -U
bind -n M-Down  select-pane -D

bind -n C-t new-window -c "#{pane_current_path}"

bind u capture-pane \; save-buffer /tmp/active_tmux_buffer \; new-window -n urlview '$SHELL -c "urlview < /tmp/active_tmux_buffer && rm /tmp/active_tmux_buffer"'

# Send "~." on a newline to kill a hung SSH session
bind k send-keys Enter '~.' Enter

# Start window/pane index at 1, not 0
set -g base-index 1
set-window-option -g pane-base-index 1

# Compact window numbers when a window is closed
set -g renumber-windows on

# More history
set -g history-limit 50000

# Show messages for longer so they're actually readable
set-option -g display-time 3000

# Use powerline (pip install powerline-status)
run-shell "powerline-daemon -q"
source "/usr/lib/python2.7/site-packages/powerline/bindings/tmux/powerline.conf"

